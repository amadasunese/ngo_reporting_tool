{% extends "base.html" %}
{% block title %}{{ indicator.indicator_code }}{% endblock %}
{% block content %}
<div class="card">
  <div style="display:flex; justify-content:space-between; align-items:center;">
    <h1>{{ indicator.indicator_code }}</h1>
    <div>
      <a class="btn" href="/indicators/{{indicator.id}}/edit">Edit</a>
      <form method="post" action="/indicators/{{indicator.id}}/delete" style="display:inline;">
    {% if csrf_token is defined %}<input type="hidden" name="csrf_token" value="{{ csrf_token() }}">{% endif %}

        <button style="background:#ef4444;" type="submit">Delete</button>
      </form>
    </div>
  </div>

  <p><b>Project:</b> {{ indicator.strategic_objective.project.name }}</p>
  <p><b>Strategic Objective:</b> {{ indicator.strategic_objective.so_code }} — {{ indicator.strategic_objective.title }}</p>

  <p><b>Type:</b> {{ indicator.indicator_type or "—" }} |
     <b>Unit:</b> {{ indicator.unit or "—" }} |
     <b>Gender disaggregation:</b> {{ "Yes" if indicator.gender_disaggregation else "No" }}
  </p>

  <p><b>Baseline:</b> {{ indicator.baseline if indicator.baseline is not none else "—" }} |
     <b>Target:</b> {{ indicator.target if indicator.target is not none else "—" }}
  </p>

  <p><b>Statement:</b><br>{{ indicator.statement }}</p>
</div>

<div class="grid">
  <div class="card">
    <h3>Linked Activities</h3>
    {% if not indicator.activities %}
      <p>No activities linked to this indicator yet.</p>
    {% else %}
      <table>
        <thead><tr><th>Date</th><th>Code</th><th>Title</th><th>Status</th><th></th></tr></thead>
        <tbody>
          {% for a in indicator.activities %}
            <tr>
              <td>{{ a.activity_date }}</td>
              <td>{{ a.activity_code or "—" }}</td>
              <td><a href="/activities/{{a.id}}">{{ a.title }}</a></td>
              <td>{{ a.status }}</td>
              <td><a href="/activities/{{a.id}}/edit">Edit</a></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  </div>

  <div class="card">
    <h3>Quick links</h3>
    <p><a href="/activities/create">+ Add Activity</a> (then link it to this indicator)</p>
    <p><a href="/indicators/?so_id={{indicator.strategic_objective_id}}">View indicators in this SO →</a></p>
  </div>
</div>
{% endblock %}
